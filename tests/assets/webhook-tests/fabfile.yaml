name: script-tests

webhooks:
  testDelete:
    url: https://posthere.io/8744-4033-8ea9l
    method: delete
    payload: []
  testGet:
    url: https://posthere.io/8744-4033-8ea9l
    method: get
    payload: []
  testPost:
    url: https://posthere.io/8744-4033-8ea9l
    method: post
    payload:
      var1: "%host.var1%"
      var2: "%settings.var2%"


var2: "This is global settings var 2"

hosts:
  base:
    type: dev
    needs:
      - local
      - webhook

  hostA:
    inheritsFrom: base
    var1: "This is var1 from hostA"
    webhooks:
      deployFinished: testGet

    deployPrepare:
      - execute(webhook, testPost)
